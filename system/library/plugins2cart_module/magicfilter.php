<?php
 class Magicfilter { private $db; private $config; private $cache; private $registry; private $url; private $currency; private $session; private $data = array(); public function __construct($registry) { goto s9fXD; w2iIY: $this->currency = $registry->get("\x63\x75\162\162\x65\156\143\x79"); goto uqnGn; B9hgN: $this->config = $registry->get("\x63\157\x6e\146\x69\147"); goto BUG_2; V_z43: $this->url = $registry->get("\165\x72\154"); goto ykdsl; ykdsl: $this->session = $registry->get("\x73\x65\163\163\151\x6f\x6e"); goto w2iIY; vkGl8: $this->registry = $registry; goto V_z43; BUG_2: $this->cache = $registry->get("\143\x61\x63\x68\145"); goto vkGl8; s9fXD: $this->db = $registry->get("\144\x62"); goto B9hgN; uqnGn: } public function getmanufacture_by_catagory_id_info($data) { goto Oc13z; Oc13z: foreach ($data as $key => $value) { goto TvYiv; TvYiv: $value = trim($value); goto Y0MdS; Vw0nC: LFZtS: goto fngCX; RBDw0: goto LFZtS; goto tiMOA; Y0MdS: if (empty($value)) { goto S0k2c; } goto IyK9s; fngCX: rEGwp: goto fHyTU; tiMOA: S0k2c: goto DMoms; DMoms: $dataim = $data[0]; goto Vw0nC; IyK9s: $dataim = implode("\54", $data); goto RBDw0; fHyTU: } goto oXuN4; IpmQS: if (isset($dataim) && $dataim !== '') { goto YjGIG; } goto iVzYr; QVnEv: $query = $this->db->query($sql); goto k7fa8; hSXK_: GWmnl: goto IN5h9; oXuN4: HtPTn: goto IpmQS; tNnvp: goto GWmnl; goto A2ocf; A2ocf: YjGIG: goto hbB6p; k7fa8: $manufacturer_data = $query->rows; goto GbFUU; GbFUU: return $manufacturer_data; goto hSXK_; hbB6p: $sql = "\123\x45\x4c\105\x43\124\x20\52\40\106\x52\117\115\x20" . DB_PREFIX . "\155\x61\156\x75\x66\x61\143\164\x75\162\145\162\40\x20\127\110\105\x52\105\x20\155\141\x6e\x75\146\141\x63\164\165\x72\145\162\137\151\144\x20\x69\156\x20\50{$dataim}\x29"; goto QVnEv; iVzYr: return array(); goto tNnvp; IN5h9: } public function filter_data_info($request, $config) { goto LboZg; yLcuk: if ($config->get("\x6d\141\147\151\143\x66\x69\154\164\145\162\x5f\x69\155\x61\x67\145\137\167\151\144\164\150") != '') { goto rguWq; } goto KGmsX; ZLSLv: $data["\160\162\x6f\144\165\143\164\x5f\143\154\141\163\163"] = $config->get("\x6d\x61\147\x69\x63\146\x69\154\164\145\x72\x5f\160\162\151\143\x65\137\x66\x69\154\164\x65\162\x5f\x63\x6c\141\x73\163"); goto fjpxu; hSA_b: goto m5soj; goto lcfCw; GBtaQ: $category_id = $request->get["\x70\x61\x74\150"]; goto W2QRp; U4soS: $parts = $request->get["\x70\141\x74\x68"]; goto GBtaQ; RTwWN: $page = $request->get["\x70\x61\147\145"]; goto U6N1C; KGmsX: $data["\x6d\141\x67\x69\143\146\151\x6c\x74\x65\x72\x5f\x69\x6d\x61\x67\x65\137\167\x69\x64\164\150"] = 30; goto yQ7mg; XHWAF: $order = $request->get["\x6f\162\x64\x65\162"]; goto DGXEu; wC4do: if (!isset($magicfilter)) { goto ONb1x; } goto XUhyx; gQYK3: ONb1x: goto yOyjn; t2jlX: $data["\155\141\147\x69\143\146\x69\x6c\164\145\x72\137\150\x65\141\x64\x69\x6e\147"] = "\x6d\x61\x67\151\143\146\151\x6c\164\145\x72"; goto ESkft; yQBsd: if (!isset($request->get["\x70\141\x74\x68"])) { goto B6s7T; } goto jmBn5; kuOAx: mmwJI: goto etR1t; fh7I0: $code = $this->currency->getSymbolLeft($pcode); goto AI4ys; iDe7q: $parts = explode("\x5f", (string) $request->get["\160\141\164\150"]); goto GbuoC; A8JX9: if (isset($request->get["\163\157\162\164"])) { goto X0qHZ; } goto p20Xb; etR1t: if (isset($request->get["\x70\162\x69\143\x65\x5f\x72\141\x6e\147\145"])) { goto KFitY; } goto CKkac; zT6CI: $sort = $request->get["\x73\157\162\164"]; goto jz96N; z8pI8: if (!(isset($manufacture) && count($manufacture) > 0)) { goto QgIaG; } goto w20Vx; GPHZO: dPNYZ: goto Zc2pc; g4pAP: $data["\x6d\x61\x67\x69\x63\146\x69\x6c\x74\145\x72\137\x70\x72\151\143\x65\137\x66\x69\x6c\164\x65\x72\137\163\x74\x61\164\x75\x73"] = $config->get("\155\141\x67\x69\x63\x66\x69\154\164\x65\162\x5f\x70\x72\x69\x63\145\x5f\x66\x69\154\x74\145\162\137\x73\x74\x61\x74\165\163"); goto uKm0N; W3CJV: EhNan: goto fh7I0; nqYHX: $data["\x70\x72\157\144\165\x63\x74\137\155\x61\156\137\154\x69\x73\164"] = $product_man_list_final; goto s7efH; Bx9QX: QftRB: goto VQL3i; BEMOm: $data["\160\x72\x69\143\145\x5f\162\x61\x6e\147\145\x5f\155\x61\170"] = $this->currency->convert($range[1], "\125\123\x44", $pcode); goto ZLSLv; PPKOC: if (!($config->get("\x6d\x61\147\151\143\146\x69\x6c\x74\x65\x72\x5f\155\141\156\165\x66\x61\x63\x74\x75\x72\145\162\137\146\x69\x6c\x74\145\162\x5f\x73\x74\141\164\165\163") != '')) { goto CzdTZ; } goto hjN3e; Or_jh: $data["\x6d\x61\x67\151\x63\x66\151\154\x74\x65\162\x5f\151\x6d\141\x67\145\x5f\163\x74\141\x74\165\163"] = 0; goto srw53; NB1dc: if ($config->get("\155\141\x67\151\x63\146\x69\154\x74\145\162\x5f\x69\155\141\x67\145\x5f\163\x74\x61\164\x75\163") != '') { goto tTE0F; } goto Or_jh; XYTlK: HJNXn: goto FTnfF; FsNag: BQYtv: goto U4soS; cU0Bf: BSEQq: goto A8JX9; srw53: goto NjwqY; goto BhnIB; w20Vx: $magic = $this->registry->get("\x6d\x6f\x64\145\x6c\x5f\155\x6f\144\x75\154\x65\137\x6d\x61\x67\151\x63\146\x69\154\x74\x65\x72"); goto HlJRs; hwa0w: o4doF: goto XHWAF; YQRtK: if (version_compare(VERSION, "\62\56\x32\x2e\60\x2e\x30", "\x3c") == true) { goto Hu0CG; } goto JS7tU; XUhyx: foreach ($magicfilter as $manufacturer) { goto YBgI4; Ce4Yh: $data["\155\141\156\x75\x66\141\x63\164\165\162\x65\x72\163"][] = array("\x6d\x61\x6e\165\146\141\143\164\x75\162\x65\162\x5f\x69\144" => $manufacturer["\155\141\156\165\x66\x61\143\164\x75\162\x65\162\x5f\151\x64"], "\x6e\x61\x6d\x65" => $manufacturer["\x6e\141\155\x65"], "\151\155\141\147\145" => $manufacturer["\151\155\141\x67\x65"] ? "\151\155\x61\147\145\57" . $manufacturer["\x69\x6d\141\147\x65"] : "\151\155\141\x67\x65\x2f\x6e\x6f\137\151\155\141\147\145\56\160\156\147", "\x68\162\x65\146" => $this->url->link("\160\x72\x6f\144\x75\143\164\x2f\x6d\141\156\x75\146\141\143\164\165\162\145\x72\57\151\x6e\x66\157", "\x6d\141\156\x75\x66\x61\x63\164\165\162\x65\162\x5f\151\x64\75" . $manufacturer["\155\141\x6e\165\146\x61\143\x74\x75\x72\145\162\x5f\x69\x64"])); goto KaULg; KaULg: c1iLz: goto lurnJ; YBgI4: $filter_data1 = array("\146\151\154\164\145\x72\137\x6d\x61\x6e\x75\146\x61\x63\164\x75\x72\x65\x72\137\x69\144" => $manufacturer["\x6d\x61\x6e\x75\146\x61\x63\x74\165\162\145\162\x5f\x69\144"]); goto Ce4Yh; lurnJ: } goto kuOAx; hwpMD: goto EGiDW; goto GPHZO; TvEd1: goto VLtqn; goto hwa0w; Eol0Q: goto eKnWw; goto r88GB; y8TeJ: $order = "\x41\x53\103"; goto TvEd1; fjpxu: return $data; goto gQYK3; RXe4B: uzfX8: goto aTLT2; HlJRs: $magicfilter = $magic->getmanufacture_by_catagory_id($manufacture); goto WmutM; ZWJVC: yH2va: goto RTwWN; kCYdj: $code = $this->currency->getSymbolRight($pcode); goto Sv90H; VQL3i: $range = explode("\55", "\x30\55\x30"); goto TniMc; CCXsk: cfx3r: goto NB1dc; AuBgF: f_nPM: goto oeJAq; DGXEu: VLtqn: goto KBIgB; vuxhY: Ym2ai: goto J7Uz2; FwGMW: $results = $pmodel->getProducts($filter_data); goto Ehb2K; KxzJS: $pcode = $this->currency->getCode(); goto DMvF0; i4dAi: rguWq: goto ffZM7; HwDal: NjwqY: goto yLcuk; esjdI: $path = ''; goto iDe7q; uKm0N: jiJtw: goto PPKOC; BhnIB: tTE0F: goto PkwPe; PxbbU: $pmodel = $this->registry->get("\x6d\157\x64\145\154\137\x63\x61\x74\x61\154\x6f\x67\137\160\162\157\144\165\143\164"); goto FGh9T; ESkft: goto cfx3r; goto hrb9p; hrb9p: eJ4AA: goto Pm7m2; yOyjn: B6s7T: goto YVXH6; FGh9T: $product_total = $pmodel->getTotalProducts($filter_data); goto FwGMW; yQ7mg: goto u_8lI; goto i4dAi; GbuoC: $category_id = ''; goto GvXMo; sprut: $product_man_list_final = array(); goto nApxo; J7Uz2: J0043: goto nqYHX; oXFtc: goto Qi3VL; goto Bx9QX; ZEhz2: KFitY: goto q1MlV; BygOV: $mdl = $this->registry->get("\x6d\x6f\144\x65\x6c\x5f\143\141\x74\141\x6c\157\x67\137\143\141\x74\x65\x67\x6f\162\171"); goto VGTcd; Ehb2K: $product_man_list = array(); goto sprut; YgH68: goto uzfX8; goto dKrUA; BP9Qp: goto b0pAh; goto ZWJVC; i7uG3: if (isset($magicfilter)) { goto jcxOI; } goto ODmEg; p20Xb: $sort = "\x70\x2e\163\x6f\162\x74\x5f\x6f\x72\144\x65\x72"; goto hSA_b; oeJAq: $filter = $request->get["\146\151\x6c\x74\145\x72"]; goto cU0Bf; TniMc: Qi3VL: goto wHPLL; W2QRp: Su3Tg: goto BygOV; VGTcd: $category_info = $mdl->getCategory($category_id); goto hH5rn; RgcYD: if (isset($request->get["\157\x72\x64\145\162"])) { goto o4doF; } goto y8TeJ; fD48r: $range = explode("\x2d", $config->get("\x6d\x61\147\151\143\x66\151\x6c\x74\145\x72\137\x70\162\x69\x63\145\x5f\x66\x69\154\164\145\162\137\162\141\x6e\x67\145")); goto oXFtc; iSMSI: ZUIZs: goto YQRtK; jz96N: m5soj: goto RgcYD; hjN3e: $data["\155\141\147\151\x63\x66\151\154\x74\x65\x72\137\155\141\x6e\x75\x66\141\x63\x74\x75\162\145\x72\x5f\146\x69\154\164\145\162\137\163\x74\x61\x74\165\x73"] = $config->get("\x6d\141\147\151\x63\146\x69\x6c\164\145\162\x5f\x6d\141\156\x75\146\141\143\x74\x75\x72\145\162\137\x66\151\154\x74\x65\x72\x5f\x73\164\141\164\165\x73"); goto pIib5; K0C1o: $page = 1; goto BP9Qp; oPNGj: EGiDW: goto yQBsd; Pm7m2: $data["\x6d\141\147\151\143\x66\151\154\164\x65\x72\137\150\x65\x61\x64\151\x6e\x67"] = $config->get("\x6d\x61\x67\151\x63\x66\151\154\x74\x65\x72\137\150\x65\x61\144\151\x6e\x67"); goto CCXsk; q1MlV: $data["\x70\x72\151\143\145\137\162\x61\156\x67\x65"] = explode("\x2d", $request->get["\160\x72\151\x63\x65\137\162\x61\x6e\x67\x65"]); goto iSMSI; mQtDg: if (!(isset($product_man_list) && count($product_man_list) > 0)) { goto J0043; } goto U9kpo; JS7tU: $pcode = $this->session->data["\143\165\162\162\145\x6e\x63\171"]; goto Eol0Q; dKrUA: pN4UZ: goto c3_ce; FTnfF: $data["\x70\x72\x69\x63\145\x5f\143\157\x64\x65"] = $code; goto J3Osf; r88GB: Hu0CG: goto KxzJS; ODmEg: $magicfilter = array(); goto hBW2L; KkPUi: $data["\160\x72\x69\x63\x65\137\x66\x69\154\x74\145\162\137\x73\x74\x61\x74\165\163"] = $config->get("\155\x61\147\151\143\146\x69\x6c\x74\x65\x72\137\x70\162\151\143\145\137\146\151\154\164\x65\x72\137\163\x74\x61\164\165\163"); goto i7uG3; KBIgB: if (isset($request->get["\160\x61\147\x65"])) { goto yH2va; } goto K0C1o; GvXMo: $category_id = (int) array_pop($parts); goto qXpie; Zc2pc: $limit = (int) $request->get["\x6c\x69\x6d\x69\164"]; goto oPNGj; pIib5: CzdTZ: goto hIc2h; YcO5N: goto BSEQq; goto AuBgF; jmBn5: if (stristr($request->get["\x70\x61\x74\150"], "\x5f") === FALSE) { goto BQYtv; } goto esjdI; aTLT2: $data["\x6d\141\156\x75\x66\x61\143\164\165\x72\145\x72\137\163\x74\x61\164\165\x73"] = $config->get("\x6d\x61\x67\x69\143\x66\x69\154\x74\145\x72\x5f\155\141\156\165\146\141\x63\x74\165\x72\145\x72\137\146\151\154\164\x65\x72\137\x73\x74\x61\164\165\x73"); goto KkPUi; LiqkL: $limit = $config->get($config->get("\x63\x6f\156\x66\x69\x67\x5f\164\x68\x65\x6d\145") . "\x5f\x70\162\157\x64\x75\x63\164\137\x6c\x69\x6d\151\x74"); goto hwpMD; QQnz3: goto HJNXn; goto W3CJV; Sv90H: $data["\x72\151\x67\x68\164\137\143\157\144\145"] = true; goto QQnz3; s7efH: if (!($config->get("\x6d\141\147\151\x63\x66\x69\x6c\164\x65\x72\x5f\x70\x72\151\x63\x65\137\x66\x69\154\164\145\162\137\x73\x74\x61\164\x75\163") != '')) { goto jiJtw; } goto g4pAP; WmutM: QgIaG: goto mQtDg; ffZM7: $data["\155\x61\147\151\143\146\x69\x6c\164\145\162\137\151\155\x61\147\x65\x5f\167\151\x64\x74\150"] = $config->get("\155\141\147\x69\x63\146\x69\x6c\x74\145\x72\137\x69\x6d\x61\x67\145\x5f\167\151\x64\164\150"); goto vlLrn; U9kpo: foreach ($product_man_list as $key => $value) { $product_man_list_final[$key] = implode("\x5f", $value); pbu_Y: } goto vuxhY; hBW2L: jcxOI: goto wC4do; cB354: $filter = ''; goto YcO5N; ID9ne: if (isset($request->get["\154\x69\155\151\164"])) { goto dPNYZ; } goto LiqkL; nApxo: foreach ($results as $product) { goto wlSd1; wlSd1: $manufacture[] = $product["\155\x61\156\x75\146\141\x63\164\x75\162\145\x72\137\151\144"]; goto h5_Ru; QZmVf: TCKjp: goto iN2_W; h5_Ru: $product_man_list[$product["\x6d\x61\156\165\x66\x61\143\x74\165\x72\145\162\137\x69\144"]][] = $product["\160\x72\157\x64\x75\143\164\137\151\144"]; goto QZmVf; iN2_W: } goto RUFSj; c3_ce: $data["\155\141\147\151\143\x66\x69\154\x74\x65\162\x5f\151\155\141\x67\x65\137\150\145\x69\x67\x68\x74"] = $config->get("\155\141\x67\x69\x63\x66\x69\x6c\164\x65\x72\137\x69\155\141\x67\x65\x5f\x68\x65\151\x67\x68\x74"); goto RXe4B; vIRTN: if ($this->currency->getSymbolLeft($pcode)) { goto EhNan; } goto kCYdj; DMvF0: eKnWw: goto vIRTN; vlLrn: u_8lI: goto tKbcs; U6N1C: b0pAh: goto ID9ne; qXpie: goto Su3Tg; goto FsNag; tKbcs: if ($config->get("\155\x61\x67\151\x63\146\x69\x6c\x74\145\162\x5f\151\x6d\x61\x67\145\x5f\x68\145\x69\147\150\x74") != '') { goto pN4UZ; } goto yokZW; LboZg: if (isset($request->get["\146\x69\x6c\164\145\162"])) { goto f_nPM; } goto cB354; J3Osf: if (!$config->get("\x6d\141\147\x69\143\146\x69\x6c\164\x65\x72\137\160\162\x69\143\x65\137\146\151\154\x74\x65\162\x5f\162\x61\x6e\x67\x65")) { goto QftRB; } goto fD48r; AI4ys: $data["\162\x69\147\150\164\x5f\143\157\144\x65"] = false; goto XYTlK; RUFSj: nPED_: goto z8pI8; PkwPe: $data["\155\141\147\x69\143\146\151\154\164\x65\162\137\151\x6d\x61\x67\145\137\x73\164\141\164\x75\163"] = $config->get("\x6d\141\147\x69\143\x66\x69\154\x74\x65\x72\137\151\x6d\141\x67\145\137\163\164\x61\x74\x75\x73"); goto HwDal; yokZW: $data["\x6d\141\147\151\143\146\x69\x6c\x74\145\x72\137\151\x6d\x61\x67\x65\137\150\145\151\x67\150\x74"] = 30; goto YgH68; hIc2h: if ($config->get("\x6d\141\147\x69\x63\x66\x69\154\x74\145\162\137\x68\145\141\x64\151\156\147") != '') { goto eJ4AA; } goto t2jlX; hH5rn: $filter_data = array("\x66\151\154\164\x65\x72\137\143\141\164\145\x67\157\162\x79\137\151\144" => $category_id, "\x66\151\x6c\x74\145\x72\137\x66\x69\154\164\145\x72" => $filter, "\163\157\162\x74" => $sort, "\157\x72\144\x65\x72" => $order, "\163\x74\141\162\164" => ($page - 1) * $limit, "\x6c\151\155\151\x74" => $limit); goto PxbbU; wHPLL: $data["\160\162\151\x63\145\137\x72\x61\156\147\145\x5f\x6d\151\156"] = $this->currency->convert($range[0], "\x55\123\x44", $pcode); goto BEMOm; CKkac: $data["\x70\162\151\x63\145\x5f\x72\x61\156\147\145"] = array(); goto uNQmt; uNQmt: goto ZUIZs; goto ZEhz2; lcfCw: X0qHZ: goto zT6CI; YVXH6: } }
